!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("prop-types"),require("react-emotion"),require("netlify-cms-ui-default"),require("immutable"),require("react-immutable-proptypes")):"function"==typeof define&&define.amd?define("netlify-cms-widget-file",["react","prop-types","react-emotion","netlify-cms-ui-default","immutable","react-immutable-proptypes"],t):"object"==typeof exports?exports["netlify-cms-widget-file"]=t(require("react"),require("prop-types"),require("react-emotion"),require("netlify-cms-ui-default"),require("immutable"),require("react-immutable-proptypes")):e["netlify-cms-widget-file"]=t(e.react,e["prop-types"],e["react-emotion"],e["netlify-cms-ui-default"],e.immutable,e["react-immutable-proptypes"])}(window,function(e,t,r,n,o,i){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=9)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t){e.exports=i},function(e,t,r){var n=r(7),o=r(8);e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[i+s]=a[s];return t||o(a)}},function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,o=r;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),i=r(1),a=r.n(i),s=r(5),l=r.n(s),u=r(2),c=r.n(u),p=r(4),d=r(6),f=r.n(d),m=r(3);function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const h=50,y=c()("div",{target:"e1awjdnj0"})("flex-basis:155px;width:155px;height:100px;margin-right:20px;margin-bottom:20px;"),v=c()("img",{target:"e1awjdnj1"})("width:100%;height:100%;object-fit:cover;border-radius:",m.lengths.borderRadius,";"),b=c()("div",{target:"e1awjdnj2"})("display:flex;flex-wrap:wrap;"),x=c()("div",{target:"e1awjdnj3"})("button:not(:first-child){margin-top:12px;}"),j=c()("a",{target:"e1awjdnj4"})("margin-bottom:20px;font-weight:normal;color:inherit;&:hover,&:active,&:focus{text-decoration:underline;}"),w=c()("ul",{target:"e1awjdnj5"})("list-style-type:none;"),C=c()("button",{target:"e1awjdnj6"})(m.buttons.button,";",m.components.badge,";"),q=c()("button",{target:"e1awjdnj7"})(m.buttons.button,";",m.components.badgeDanger,";");function R(e){return Array.isArray(e)||p.List.isList(e)}function E({forImage:e}={}){var t,r;return r=t=class extends o.a.Component{constructor(t){super(t),g(this,"handleChange",t=>{const r=this.props,n=r.field,o=r.onOpenMediaLibrary,i=r.value;return t.preventDefault(),o({controlID:this.controlID,forImage:e,privateUpload:n.get("private"),value:i,config:n.getIn(["options","media_library","config"])})}),g(this,"handleRemove",e=>(e.preventDefault(),this.props.onClearMediaControl(this.controlID),this.props.onChange(""))),g(this,"renderFileLink",e=>{const t=h;if(!e||e.length<=t)return e;const r=`${e.substring(0,t/2)}â€¦${e.substring(e.length-t/2+1,e.length)}`;return o.a.createElement(j,{href:e,rel:"noopener",target:"_blank"},r)}),g(this,"renderFileLinks",()=>{const e=this.props.value;return R(e)?o.a.createElement(w,null,e.map(e=>o.a.createElement("li",{key:e},this.renderFileLink(e)))):this.renderFileLink(e)}),g(this,"renderImages",()=>{const e=this.props,t=e.getAsset,r=e.value;return R(r)?o.a.createElement(b,null,r.map(e=>o.a.createElement(y,{key:e},o.a.createElement(v,{src:t(e)})))):o.a.createElement(y,null,o.a.createElement(v,{src:t(r)}))}),g(this,"renderSelection",t=>o.a.createElement("div",null,e?this.renderImages():null,o.a.createElement(x,null,e?null:this.renderFileLinks(),o.a.createElement(C,{onClick:this.handleChange},"Choose different ",t),o.a.createElement(q,{onClick:this.handleRemove},"Remove ",t)))),g(this,"renderNoSelection",(e,t)=>o.a.createElement(C,{onClick:this.handleChange},"Choose ",t," ",e)),this.controlID=f()()}shouldComponentUpdate(e){if(this.props.value!==e.value)return!0;const t=e.mediaPaths.get(this.controlID);return!(!t||e.value===t)}componentDidUpdate(){const e=this.props,t=e.mediaPaths,r=e.value,n=e.onRemoveInsertedMedia,o=e.onChange,i=t.get(this.controlID);i&&i!==r?o(i):i&&i===r&&n(this.controlID)}componentWillUnmount(){this.props.onRemoveMediaControl(this.controlID)}render(){const t=this.props,r=t.value,n=t.classNameWrapper,i=e?"image":"file",a=e?"an":"a";return o.a.createElement("div",{className:n},o.a.createElement("span",null,r?this.renderSelection(i):this.renderNoSelection(i,a)))}},g(t,"propTypes",{field:a.a.object.isRequired,getAsset:a.a.func.isRequired,mediaPaths:l.a.map.isRequired,onAddAsset:a.a.func.isRequired,onChange:a.a.func.isRequired,onRemoveInsertedMedia:a.a.func.isRequired,onOpenMediaLibrary:a.a.func.isRequired,onClearMediaControl:a.a.func.isRequired,onRemoveMediaControl:a.a.func.isRequired,classNameWrapper:a.a.string.isRequired,value:a.a.oneOfType([a.a.string,a.a.arrayOf(a.a.string)])}),g(t,"defaultProps",{value:""}),r}const A=c()(({value:e,getAsset:t})=>o.a.createElement("a",{href:t(e),rel:"noopener noreferrer",target:"_blank"},e),{target:"e1sxjo0z0"})("display:block;");function I({values:e,getAsset:t}){return o.a.createElement("div",null,e.map(e=>o.a.createElement(A,{key:e,value:e,getAsset:t})))}function k({value:e,getAsset:t}){return Array.isArray(e)||p.List.isList(e)?o.a.createElement(I,{values:e,getAsset:t}):o.a.createElement(A,{value:e,getAsset:t})}const M=e=>o.a.createElement(m.WidgetPreviewContainer,null,e.value?o.a.createElement(k,e):null);M.propTypes={getAsset:a.a.func.isRequired,value:a.a.node};var D=M;r.d(t,"FileControl",function(){return O}),r.d(t,"withFileControl",function(){return E}),r.d(t,"FilePreview",function(){return D});const O=E()}])});
//# sourceMappingURL=netlify-cms-widget-file.js.map
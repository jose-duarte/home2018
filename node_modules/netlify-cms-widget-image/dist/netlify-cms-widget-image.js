!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("immutable"),require("prop-types"),require("react-emotion"),require("netlify-cms-ui-default")):"function"==typeof define&&define.amd?define("netlify-cms-widget-image",["react","immutable","prop-types","react-emotion","netlify-cms-ui-default"],t):"object"==typeof exports?exports["netlify-cms-widget-image"]=t(require("react"),require("immutable"),require("prop-types"),require("react-emotion"),require("netlify-cms-ui-default")):e["netlify-cms-widget-image"]=t(e.react,e.immutable,e["prop-types"],e["react-emotion"],e["netlify-cms-ui-default"])}(window,function(e,t,r,n,o){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t,r){window,e.exports=function(e,t,r,n,o,a){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=9)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t){e.exports=a},function(e,t,r){var n=r(7),o=r(8);e.exports=function(e,t,r){var a=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||n)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var u=0;u<16;++u)t[a+u]=i[u];return t||o(i)}},function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,o=r;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),a=r(1),i=r.n(a),u=r(5),s=r.n(u),l=r(2),c=r.n(l),f=r(4),p=r(6),d=r.n(p),m=r(3);function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const y=50,g=c()("div",{target:"e1awjdnj0"})("flex-basis:155px;width:155px;height:100px;margin-right:20px;margin-bottom:20px;"),b=c()("img",{target:"e1awjdnj1"})("width:100%;height:100%;object-fit:cover;border-radius:",m.lengths.borderRadius,";"),h=c()("div",{target:"e1awjdnj2"})("display:flex;flex-wrap:wrap;"),x=c()("div",{target:"e1awjdnj3"})("button:not(:first-child){margin-top:12px;}"),j=c()("a",{target:"e1awjdnj4"})("margin-bottom:20px;font-weight:normal;color:inherit;&:hover,&:active,&:focus{text-decoration:underline;}"),w=c()("ul",{target:"e1awjdnj5"})("list-style-type:none;"),O=c()("button",{target:"e1awjdnj6"})(m.buttons.button,";",m.components.badge,";"),S=c()("button",{target:"e1awjdnj7"})(m.buttons.button,";",m.components.badgeDanger,";");function I(e){return Array.isArray(e)||f.List.isList(e)}function E({forImage:e}={}){var t,r;return r=t=class extends o.a.Component{constructor(t){super(t),v(this,"handleChange",t=>{const r=this.props,n=r.field,o=r.onOpenMediaLibrary,a=r.value;return t.preventDefault(),o({controlID:this.controlID,forImage:e,privateUpload:n.get("private"),value:a,config:n.getIn(["options","media_library","config"])})}),v(this,"handleRemove",e=>(e.preventDefault(),this.props.onClearMediaControl(this.controlID),this.props.onChange(""))),v(this,"renderFileLink",e=>{const t=y;if(!e||e.length<=t)return e;const r=`${e.substring(0,t/2)}â€¦${e.substring(e.length-t/2+1,e.length)}`;return o.a.createElement(j,{href:e,rel:"noopener",target:"_blank"},r)}),v(this,"renderFileLinks",()=>{const e=this.props.value;return I(e)?o.a.createElement(w,null,e.map(e=>o.a.createElement("li",{key:e},this.renderFileLink(e)))):this.renderFileLink(e)}),v(this,"renderImages",()=>{const e=this.props,t=e.getAsset,r=e.value;return I(r)?o.a.createElement(h,null,r.map(e=>o.a.createElement(g,{key:e},o.a.createElement(b,{src:t(e)})))):o.a.createElement(g,null,o.a.createElement(b,{src:t(r)}))}),v(this,"renderSelection",t=>o.a.createElement("div",null,e?this.renderImages():null,o.a.createElement(x,null,e?null:this.renderFileLinks(),o.a.createElement(O,{onClick:this.handleChange},"Choose different ",t),o.a.createElement(S,{onClick:this.handleRemove},"Remove ",t)))),v(this,"renderNoSelection",(e,t)=>o.a.createElement(O,{onClick:this.handleChange},"Choose ",t," ",e)),this.controlID=d()()}shouldComponentUpdate(e){if(this.props.value!==e.value)return!0;const t=e.mediaPaths.get(this.controlID);return!(!t||e.value===t)}componentDidUpdate(){const e=this.props,t=e.mediaPaths,r=e.value,n=e.onRemoveInsertedMedia,o=e.onChange,a=t.get(this.controlID);a&&a!==r?o(a):a&&a===r&&n(this.controlID)}componentWillUnmount(){this.props.onRemoveMediaControl(this.controlID)}render(){const t=this.props,r=t.value,n=t.classNameWrapper,a=e?"image":"file",i=e?"an":"a";return o.a.createElement("div",{className:n},o.a.createElement("span",null,r?this.renderSelection(a):this.renderNoSelection(a,i)))}},v(t,"propTypes",{field:i.a.object.isRequired,getAsset:i.a.func.isRequired,mediaPaths:s.a.map.isRequired,onAddAsset:i.a.func.isRequired,onChange:i.a.func.isRequired,onRemoveInsertedMedia:i.a.func.isRequired,onOpenMediaLibrary:i.a.func.isRequired,onClearMediaControl:i.a.func.isRequired,onRemoveMediaControl:i.a.func.isRequired,classNameWrapper:i.a.string.isRequired,value:i.a.oneOfType([i.a.string,i.a.arrayOf(i.a.string)])}),v(t,"defaultProps",{value:""}),r}const A=c()(({value:e,getAsset:t})=>o.a.createElement("a",{href:t(e),rel:"noopener noreferrer",target:"_blank"},e),{target:"e1sxjo0z0"})("display:block;");function M({values:e,getAsset:t}){return o.a.createElement("div",null,e.map(e=>o.a.createElement(A,{key:e,value:e,getAsset:t})))}function C({value:e,getAsset:t}){return Array.isArray(e)||f.List.isList(e)?o.a.createElement(M,{values:e,getAsset:t}):o.a.createElement(A,{value:e,getAsset:t})}const R=e=>o.a.createElement(m.WidgetPreviewContainer,null,e.value?o.a.createElement(C,e):null);R.propTypes={getAsset:i.a.func.isRequired,value:i.a.node};var k=R;r.d(t,"FileControl",function(){return q}),r.d(t,"withFileControl",function(){return E}),r.d(t,"FilePreview",function(){return k});const q=E()}])}(r(0),r(2),r(3),r(4),r(1),r(6))},function(e,t,r){"use strict";var n=r(1),o="<<anonymous>>",a={listOf:function(e){return l(e,"List",n.List.isList)},mapOf:function(e,t){return c(e,t,"Map",n.Map.isMap)},orderedMapOf:function(e,t){return c(e,t,"OrderedMap",n.OrderedMap.isOrderedMap)},setOf:function(e){return l(e,"Set",n.Set.isSet)},orderedSetOf:function(e){return l(e,"OrderedSet",n.OrderedSet.isOrderedSet)},stackOf:function(e){return l(e,"Stack",n.Stack.isStack)},iterableOf:function(e){return l(e,"Iterable",n.Iterable.isIterable)},recordOf:function(e){return u(function(t,r,o,a,u){for(var s=arguments.length,l=Array(s>5?s-5:0),c=5;c<s;c++)l[c-5]=arguments[c];var f=t[r];if(!(f instanceof n.Record)){var p=i(f),d=a;return new Error("Invalid "+d+" `"+u+"` of type `"+p+"` supplied to `"+o+"`, expected an Immutable.js Record.")}for(var m in e){var v=e[m];if(v){var y=f.toObject(),g=v.apply(void 0,[y,m,o,a,u+"."+m].concat(l));if(g)return g}}})},shape:p,contains:p,mapContains:function(e){return f(e,"Map",n.Map.isMap)},list:s("List",n.List.isList),map:s("Map",n.Map.isMap),orderedMap:s("OrderedMap",n.OrderedMap.isOrderedMap),set:s("Set",n.Set.isSet),orderedSet:s("OrderedSet",n.OrderedSet.isOrderedSet),stack:s("Stack",n.Stack.isStack),seq:s("Seq",n.Seq.isSeq),record:s("Record",function(e){return e instanceof n.Record}),iterable:s("Iterable",n.Iterable.isIterable)};function i(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":e instanceof n.Iterable?"Immutable."+e.toSource().split(" ")[0]:t}function u(e){function t(t,r,n,a,i,u){for(var s=arguments.length,l=Array(s>6?s-6:0),c=6;c<s;c++)l[c-6]=arguments[c];return u=u||n,a=a||o,null!=r[n]?e.apply(void 0,[r,n,a,i,u].concat(l)):t?new Error("Required "+i+" `"+u+"` was not specified in `"+a+"`."):void 0}var r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r}function s(e,t){return u(function(r,n,o,a,u){var s=r[n];if(!t(s)){var l=i(s);return new Error("Invalid "+a+" `"+u+"` of type `"+l+"` supplied to `"+o+"`, expected `"+e+"`.")}return null})}function l(e,t,r){return u(function(n,o,a,u,s){for(var l=arguments.length,c=Array(l>5?l-5:0),f=5;f<l;f++)c[f-5]=arguments[f];var p=n[o];if(!r(p)){var d=u,m=i(p);return new Error("Invalid "+d+" `"+s+"` of type `"+m+"` supplied to `"+a+"`, expected an Immutable.js "+t+".")}if("function"!=typeof e)return new Error("Invalid typeChecker supplied to `"+a+"` for propType `"+s+"`, expected a function.");for(var v=p.toArray(),y=0,g=v.length;y<g;y++){var b=e.apply(void 0,[v,y,a,u,s+"["+y+"]"].concat(c));if(b instanceof Error)return b}})}function c(e,t,r,n){return u(function(){for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return l(e,r,n).apply(void 0,a)||t&&function(e){return u(function(t,r,n,o,a){for(var i=arguments.length,u=Array(i>5?i-5:0),s=5;s<i;s++)u[s-5]=arguments[s];var l=t[r];if("function"!=typeof e)return new Error("Invalid keysTypeChecker (optional second argument) supplied to `"+n+"` for propType `"+a+"`, expected a function.");for(var c=l.keySeq().toArray(),f=0,p=c.length;f<p;f++){var d=e.apply(void 0,[c,f,n,o,a+" -> key("+c[f]+")"].concat(u));if(d instanceof Error)return d}})}(t).apply(void 0,a)})}function f(e){var t=void 0===arguments[1]?"Iterable":arguments[1],r=void 0===arguments[2]?n.Iterable.isIterable:arguments[2];return u(function(n,o,a,u,s){for(var l=arguments.length,c=Array(l>5?l-5:0),f=5;f<l;f++)c[f-5]=arguments[f];var p=n[o];if(!r(p)){var d=i(p);return new Error("Invalid "+u+" `"+s+"` of type `"+d+"` supplied to `"+a+"`, expected an Immutable.js "+t+".")}var m=p.toObject();for(var v in e){var y=e[v];if(y){var g=y.apply(void 0,[m,v,a,u,s+"."+v].concat(c));if(g)return g}}})}function p(e){return f(e)}e.exports=a},function(e,t,r){"use strict";r.r(t);var n=r(5),o=r(0),a=r.n(o),i=r(2),u=r.n(i),s=r(3),l=r.n(s),c=r(1),f=r(4);const p=l()(({getAsset:e,value:t})=>a.a.createElement("img",{src:e(t),role:"presentation"}),{target:"e1ksx8c40"})("display:block;max-width:100%;height:auto;"),d=e=>{const t=e.value,r=e.getAsset;return Array.isArray(t)||c.List.isList(t)?t.map(e=>a.a.createElement(p,{key:e,value:e,getAsset:r})):a.a.createElement(p,e)},m=e=>a.a.createElement(f.WidgetPreviewContainer,null,e.value?a.a.createElement(d,e):null);m.propTypes={getAsset:u.a.func.isRequired,value:u.a.node};var v=m;r.d(t,"ImageControl",function(){return y}),r.d(t,"ImagePreview",function(){return v});const y=Object(n.withFileControl)({forImage:!0})}])});
//# sourceMappingURL=netlify-cms-widget-image.js.map